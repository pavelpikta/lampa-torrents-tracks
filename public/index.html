<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FFprobe Tracks Analyzer</title>
    <link rel="icon" href="/favicon.png" type="image/png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ['DM Sans', 'system-ui', 'sans-serif'] },
            boxShadow: {
              'glow-blue': '0 0 20px -5px rgb(59 130 246 / 0.4)',
              'glow-purple': '0 0 20px -5px rgb(168 85 247 / 0.4)',
            },
          },
        },
      };
    </script>
    <style>
      @keyframes pulse-slow {
        0%,
        100% {
          opacity: 1;
        }

        50% {
          opacity: 0.5;
        }
      }

      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }

        100% {
          background-position: 200% 0;
        }
      }

      .loading-pulse {
        animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      .focus-ring:focus-visible {
        outline: 2px solid rgb(59 130 246);
        outline-offset: 2px;
      }
    </style>
  </head>

  <body
    class="font-sans antialiased bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 min-h-screen text-slate-100"
  >
    <nav class="sticky top-0 z-50 border-b border-slate-700/50 bg-slate-900/80 backdrop-blur-md">
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-14 md:h-16">
          <div class="flex items-center gap-6 md:gap-8">
            <a
              href="/"
              class="text-lg md:text-xl font-bold bg-gradient-to-r from-blue-400 via-blue-300 to-violet-400 bg-clip-text text-transparent hover:opacity-90 transition-opacity"
            >
              FFprobe Analyzer
            </a>
            <div class="hidden md:flex gap-1">
              <a
                href="/"
                class="px-3 py-2 rounded-lg text-sm font-medium bg-slate-700 text-white ring-1 ring-slate-600"
              >
                Analyzer
              </a>
              <a
                href="/info.html"
                class="px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-slate-700/80 hover:text-white transition-colors duration-200"
              >
                Info
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="container mx-auto px-4 py-8 md:py-10 max-w-4xl">
      <div class="text-center mb-10">
        <h1
          class="text-3xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-blue-400 via-blue-300 to-violet-400 bg-clip-text text-transparent tracking-tight"
        >
          FFprobe Tracks Analyzer
        </h1>
        <p class="text-slate-400 text-sm md:text-base">Analyze media streams from TorrServer</p>
      </div>

      <div
        class="rounded-2xl border border-slate-700/60 bg-slate-800/60 p-6 md:p-8 mb-8 shadow-xl shadow-black/20"
      >
        <div class="space-y-5">
          <div>
            <label for="torrentHash" class="block text-sm font-medium text-slate-300 mb-2">
              Torrent Hash or Magnet Link
            </label>
            <input
              type="text"
              id="torrentHash"
              placeholder="Enter torrent hash or magnet link"
              class="focus-ring w-full rounded-xl border border-slate-600 bg-slate-900/80 px-4 py-3 text-slate-100 placeholder-slate-500 transition-colors focus:border-blue-500 focus:bg-slate-900"
            />
            <p class="mt-1.5 text-xs text-slate-500">
              Supports both hash (40 chars) and magnet links
            </p>
          </div>

          <div>
            <label for="fileIndex" class="block text-sm font-medium text-slate-300 mb-2">
              File Index
            </label>
            <input
              type="number"
              id="fileIndex"
              value="1"
              min="1"
              class="focus-ring w-full rounded-xl border border-slate-600 bg-slate-900/80 px-4 py-3 text-slate-100 transition-colors focus:border-blue-500 focus:bg-slate-900"
            />
          </div>

          <div class="flex gap-3 pt-1">
            <button
              type="button"
              id="analyzeBtn"
              class="focus-ring flex-1 rounded-xl bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-3 font-semibold text-white shadow-lg shadow-blue-900/30 transition-all duration-200 hover:from-blue-500 hover:to-blue-600 hover:shadow-glow-blue active:scale-[0.98]"
            >
              Analyze
            </button>
            <button
              type="button"
              id="copyButton"
              class="focus-ring rounded-xl border border-slate-600 bg-slate-700/80 px-6 py-3 font-semibold text-white transition-all duration-200 hover:bg-slate-600 active:scale-[0.98]"
            >
              Copy
            </button>
          </div>
        </div>
      </div>

      <div id="loadingIndicator" class="hidden mb-8">
        <div
          class="flex items-center justify-center rounded-2xl border border-blue-500/40 bg-blue-950/40 px-6 py-5 shadow-inner"
        >
          <div class="loading-pulse flex items-center gap-3">
            <svg
              class="h-5 w-5 shrink-0 animate-spin text-blue-400"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
            <span class="font-medium text-blue-300">Analyzing media streams...</span>
          </div>
        </div>
      </div>

      <div id="errorMessage" class="hidden mb-8">
        <div class="rounded-2xl border border-red-500/40 bg-red-950/40 p-5">
          <div class="flex items-start gap-3">
            <svg
              class="mt-0.5 h-5 w-5 shrink-0 text-red-400"
              fill="currentColor"
              viewBox="0 0 20 20"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                clip-rule="evenodd"
              />
            </svg>
            <div class="min-w-0 flex-1">
              <h3 class="font-semibold text-red-400">Error</h3>
              <p class="mt-1 text-sm text-red-300/90" id="errorText"></p>
            </div>
          </div>
        </div>
      </div>

      <div id="results" class="hidden space-y-5">
        <div
          class="overflow-hidden rounded-2xl border border-slate-700/60 bg-slate-800/60 shadow-xl shadow-black/10"
        >
          <button
            type="button"
            data-toggle-section="video"
            class="focus-ring flex w-full items-center justify-between px-6 py-4 text-left transition-colors bg-gradient-to-r from-violet-600 to-violet-700 hover:from-violet-500 hover:to-violet-600"
          >
            <h2 class="flex items-center gap-2 text-lg font-bold md:text-xl">
              <svg
                class="h-5 w-5 md:h-6 md:w-6"
                fill="currentColor"
                viewBox="0 0 20 20"
                aria-hidden="true"
              >
                <path
                  d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"
                />
              </svg>
              Video Tracks
            </h2>
            <svg
              id="videoIcon"
              class="h-5 w-5 shrink-0 transition-transform duration-200"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <div id="videoTracks" class="p-5 md:p-6"></div>
        </div>

        <div
          class="overflow-hidden rounded-2xl border border-slate-700/60 bg-slate-800/60 shadow-xl shadow-black/10"
        >
          <button
            type="button"
            data-toggle-section="audio"
            class="focus-ring flex w-full items-center justify-between px-6 py-4 text-left transition-colors bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600"
          >
            <h2 class="flex items-center gap-2 text-lg font-bold md:text-xl">
              <svg
                class="h-5 w-5 md:h-6 md:w-6"
                fill="currentColor"
                viewBox="0 0 20 20"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z"
                  clip-rule="evenodd"
                />
              </svg>
              Audio Tracks
            </h2>
            <svg
              id="audioIcon"
              class="h-5 w-5 shrink-0 transition-transform duration-200"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <div id="audioTracks" class="p-5 md:p-6"></div>
        </div>

        <div
          class="overflow-hidden rounded-2xl border border-slate-700/60 bg-slate-800/60 shadow-xl shadow-black/10"
        >
          <button
            type="button"
            data-toggle-section="subtitle"
            class="focus-ring flex w-full items-center justify-between px-6 py-4 text-left transition-colors bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600"
          >
            <h2 class="flex items-center gap-2 text-lg font-bold md:text-xl">
              <svg
                class="h-5 w-5 md:h-6 md:w-6"
                fill="currentColor"
                viewBox="0 0 20 20"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 5a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm0 3a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1z"
                  clip-rule="evenodd"
                />
              </svg>
              Subtitles
            </h2>
            <svg
              id="subtitleIcon"
              class="h-5 w-5 shrink-0 transition-transform duration-200"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <div id="subtitleTracks" class="p-5 md:p-6"></div>
        </div>

        <div
          class="overflow-hidden rounded-2xl border border-slate-700/60 bg-slate-800/60 shadow-xl shadow-black/10"
        >
          <button
            type="button"
            id="toggleRawDataBtn"
            class="focus-ring flex w-full items-center justify-between px-6 py-4 text-left transition-colors bg-slate-700/50 hover:bg-slate-700/80"
          >
            <h2 class="flex items-center gap-2 text-base font-bold text-slate-300 md:text-lg">
              <svg
                class="h-5 w-5 shrink-0"
                fill="currentColor"
                viewBox="0 0 20 20"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
              Raw JSON Data
            </h2>
            <svg
              id="rawDataIcon"
              class="h-5 w-5 shrink-0 transition-transform duration-200"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <div id="rawDataContent" class="hidden border-t border-slate-700/60 px-5 py-4 md:px-6">
            <pre
              id="rawData"
              class="overflow-x-auto rounded-xl bg-slate-900/80 p-4 text-xs text-slate-300 font-mono"
            ></pre>
          </div>
        </div>
      </div>

      <div class="mt-14 text-center text-sm text-slate-500">
        <p>Powered by TorrServer FFprobe API</p>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
